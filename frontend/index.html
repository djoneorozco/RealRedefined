<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RealRedefined Quiz</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.4.2/dist/tailwind.min.css" rel="stylesheet" />
</head>
<body class="bg-orange-50">
  <main class="max-w-2xl mx-auto my-8 bg-white p-8 rounded-xl shadow-lg">
    <!-- Test Connection -->
    <section class="mb-6 text-center">
      <h1 class="text-3xl font-bold mb-4">RealRedefined Quiz</h1>
      <p class="mb-4">Click below to test backend connection</p>
      <button
        id="test-btn"
        class="bg-yellow-900 text-white py-2 px-4 rounded hover:bg-yellow-800 transition"
      >
        Test Connection
      </button>
      <div id="test-result" class="mt-4 text-gray-700"></div>
    </section>

    <hr class="my-6" />

    <!-- AI Interaction -->
    <section>
      <h2 class="text-2xl font-semibold mb-4 text-center">AI Interaction</h2>
      <textarea
        id="user-input"
        class="w-full border rounded p-2 mb-4 focus:outline-yellow-500"
        rows="4"
        placeholder="Enter your prompt here"
      ></textarea>
      <div class="text-center">
        <button
          id="ask-btn"
          class="bg-blue-700 text-white py-2 px-6 rounded hover:bg-blue-600 transition"
        >
          Ask AI
        </button>
      </div>
      <div id="ai-response" class="mt-4 p-4 bg-gray-100 rounded text-gray-800"></div>
    </section>
  </main>

  <script>
    // ‚Üê‚Äî‚Äî change this to your Render URL
    const BACKEND_URL = 'https://realredefined-1.onrender.com';

    // Test Connection handler
    document.getElementById('test-btn').addEventListener('click', async () => {
      const resultEl = document.getElementById('test-result');
      resultEl.textContent = '‚è≥ Connecting‚Ä¶';
      try {
        const res = await fetch(BACKEND_URL);
        if (res.ok) {
          const text = await res.text();
          resultEl.textContent = '‚úÖ ' + text;
        } else {
          resultEl.textContent = `‚ùå ${res.status} ${res.statusText}`;
        }
      } catch (err) {
        resultEl.textContent = '‚ùå ' + err.message;
      }
    });

    // Ask AI handler
    document.getElementById('ask-btn').addEventListener('click', async () => {
      const prompt = document.getElementById('user-input').value;
      const responseEl = document.getElementById('ai-response');
      responseEl.textContent = 'ü§ñ Thinking‚Ä¶';
      try {
        const res = await fetch(`${BACKEND_URL}/ai`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ prompt })
        });
        if (res.ok) {
          const data = await res.json();
          // adjust this if your backend shape is different
          responseEl.textContent =
            (data.choices && data.choices[0].message.content) ||
            JSON.stringify(data, null, 2);
        } else {
          responseEl.textContent = `‚ùå ${res.status} ${res.statusText}`;
        }
      } catch (err) {
        responseEl.textContent = '‚ùå ' + err.message;
      }
    });
  </script>
</body>
</html>
